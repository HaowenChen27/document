### 一、什么是MySQL？

MySQL 是一种关系型数据库

开源免费

默认端口号 3306



### 二、存储引擎

**查看MySQL提供的所有的存储引擎**

```
mysql> show engines;
```

默认存储引擎： InnoDB 

在5.7版本所有的存储引擎中只有InnoDB 是事务性存储引擎



**查看MySQL当前默认的存储引擎**

```
mysql> show variables like '%storage_engine%';
```



**查看表的存储引擎**

```sql
show table status like <table_name>
```

其中会有 列名为 Engine 的 表示当前的表存储引擎是什么。



**常用来对比的两个数据库引擎**

MyISAM 和 InnoDB

MyISAM介绍：

>MyISAM 是MySQL 的默认数据库引擎 （5.5版本之前）。性能极佳，但不支持事务和行级锁，最可怕的是崩溃之后无法安全恢复。

之后引入 InnoDB ，5.5版本之后的默认引擎为 InnoDB

**两者对比：**

1. **是否支持行级锁：** MyISAM 只有表级锁，InnoDB 支持行级锁和表级锁，默认是行级锁
2. **是否支持事务和崩溃后的安全恢复：** **MyISAM** 强调的是性能，每次查询都是原子性，其执行速度比InnoDB类型更快，但是不提供事务支持。**InnoDB** 提供事务支持，外部键等高级数据库功能。**InnoDB** 具有事务(commit)、回滚(rollback)和崩溃修复能力的、事务安全(ACID)
3. **是否支持MVCC：** 仅 InnoDB 支持。应对高并发事务， MVCC比单纯的加锁更高效



### 三、字符集

字符集指的是一种从二进制编码到某类字符符号的映射。

校对规则是指某种字符集下的排序规则

MySQL中每一种字符集都会对应一系列的校对规则

MySQL采用的类似继承的方式指定字符集的默认值，数据库以及数据库表都有自己的默认值，他们逐层继承

常用字符集：

+ GBK   （每个汉字占两个字节）
+ UTF-8   (每个汉字占三个字节)
+ Utf8mb4 (支持4个字节 可以用来存储特殊的Unicode编码 比如 Emoji 表情)



### 四、索引

MySQL 索引主要分为两种： **BTree索引** 和 **哈希索引**

哈希索引底层数据结构是哈希表，绝大多数需求为单条记录查询的时候可以选择哈希索引，查询性能最快

其余大部分场景 使用BTree索引

**MyISAM引擎与InnoDB在BTree索引上实现方式的区别：**

+ MyISAM：B+Tree叶子节点的data域名存放的是数据记录的地址。使用时按照B+Tree搜索算法搜索索引，如果指定的Key存在，取出 data 域的值，以 data 域的值为地址读取相应的数据记录。这被称为”非聚簇索引“。
+ InnoDB:  其数据文件本身就是索引文件。相比MyISAM索引文件和数据文件是分离的，其表数据文件本身就是按B+Tree组织的一个索引结构，树的叶节点data域保存了完整的数据记录。这个索引的Key是数据表的主键，因此InnoDB表数据文件本身就是主索引，这被称为聚簇索引。而其余的索引都作为辅助索引，辅助索引的data域存储相应记录的主键值而不是地址。



